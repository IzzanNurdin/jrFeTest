{"ast":null,"code":"import { createPortal } from \"react-dom\";\nimport { FocusTrap } from \"@kata-kit/common\";\nimport Scrollbars from \"react-custom-scrollbars\";\nimport classnames from \"classnames\";\nimport { Button } from \"@kata-kit/button\";\nimport { createElement, Fragment, Component, createContext } from \"react\";\nimport styled, { css } from \"styled-components\";\nimport { variables, Theme } from \"@kata-kit/theme\";\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nfunction __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n}\n\nvar DrawerContext = createContext({});\nvar drawerBoxShadow = \"0 4px 6px 2px rgba(0, 0, 0, 0.15)\";\n\nvar DrawerBase = function DrawerBase(props) {\n  return css(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n    display: block;\\n    position: fixed;\\n    top: 0;\\n    left: 0;\\n    height: 100%;\\n    min-height: 1px;\\n    width: 480px;\\n    padding-bottom: 170px;\\n    z-index: 1035;\\n    box-shadow: \", \";\\n    background-color: \", \";\\n    color: \", \";\\n    transition: all 0.5s cubic-bezier(0.15, 1, 0.3, 1);\\n\\n    &.is-open {\\n      visibility: visible;\\n    }\\n\\n    &.is-closed {\\n      visibility: hidden;\\n      transform: translateX(100%);\\n    }\\n  \"], [\"\\n    display: block;\\n    position: fixed;\\n    top: 0;\\n    left: 0;\\n    height: 100%;\\n    min-height: 1px;\\n    width: 480px;\\n    padding-bottom: 170px;\\n    z-index: 1035;\\n    box-shadow: \", \";\\n    background-color: \", \";\\n    color: \", \";\\n    transition: all 0.5s cubic-bezier(0.15, 1, 0.3, 1);\\n\\n    &.is-open {\\n      visibility: visible;\\n    }\\n\\n    &.is-closed {\\n      visibility: hidden;\\n      transform: translateX(100%);\\n    }\\n  \"])), drawerBoxShadow, props.theme.backgroundColor, props.theme.textColor);\n};\n\nvar DrawerRight = css(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  left: auto;\\n  right: 0;\\n  border-right: none;\\n  box-shadow: \", \";\\n\\n  &.fold {\\n    margin-left: 0;\\n  }\\n\\n  &.folding {\\n    transition-property: margin-right;\\n  }\\n\"], [\"\\n  left: auto;\\n  right: 0;\\n  border-right: none;\\n  box-shadow: \", \";\\n\\n  &.fold {\\n    margin-left: 0;\\n  }\\n\\n  &.folding {\\n    transition-property: margin-right;\\n  }\\n\"])), drawerBoxShadow);\nvar DrawerOverlayStyles = css(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  &.is-open {\\n    position: fixed;\\n    z-index: 1000;\\n    display: block;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    height: 100%;\\n    background-color: rgba(0, 0, 0, 0.65);\\n  }\\n\"], [\"\\n  &.is-open {\\n    position: fixed;\\n    z-index: 1000;\\n    display: block;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    height: 100%;\\n    background-color: rgba(0, 0, 0, 0.65);\\n  }\\n\"])));\nvar templateObject_1, templateObject_2, templateObject_3;\nvar theme = {\n  backgroundColor: variables.colors.white,\n  textColor: variables.colors.gray80,\n  borderColor: variables.colors.gray30\n};\n\nvar Drawer = function (_super) {\n  __extends(Drawer, _super);\n\n  function Drawer(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.el = document.createElement(\"div\");\n    _this.state = {\n      isOpen: props.isOpen,\n      overflow: false\n    };\n    _this.watchOverflow = _this.watchOverflow.bind(_this);\n    _this.onCloseDrawer = _this.onCloseDrawer.bind(_this);\n    _this.handleKeyDown = _this.handleKeyDown.bind(_this);\n    return _this;\n  }\n\n  Drawer.getDerivedStateFromProps = function (props, state) {\n    return {\n      isOpen: props.isOpen\n    };\n  };\n\n  Drawer.prototype.componentDidMount = function () {\n    document.body.appendChild(this.el);\n  };\n\n  Drawer.prototype.componentWillUnmount = function () {\n    this.reset();\n    document.body.removeChild(this.el);\n  };\n\n  Drawer.prototype.componentDidUpdate = function (prev) {\n    if (prev.isOpen !== this.props.isOpen) {\n      if (this.props.isOpen) {\n        document.body.classList.add(\"noscroll\");\n      } else {\n        document.body.classList.remove(\"noscroll\");\n      }\n    }\n  };\n\n  Drawer.prototype.reset = function () {\n    try {\n      document.body.classList.remove(\"noscroll\");\n      this.watchOverflow(0);\n    } catch (err) {}\n  };\n\n  Drawer.prototype.handleKeyDown = function (event) {\n    if (event.key === \"Escape\") {\n      this.onCloseDrawer();\n    }\n  };\n\n  Drawer.prototype.onCloseDrawer = function () {\n    this.props.onClose();\n  };\n\n  Drawer.prototype.watchOverflow = function (position) {\n    if (position > 0.05) {\n      this.setState({\n        overflow: true\n      });\n    } else {\n      this.setState({\n        overflow: false\n      });\n    }\n  };\n\n  Drawer.prototype.getContextAPI = function () {\n    return {\n      overflow: this.state.overflow,\n      labelledById: this.props.labelledById,\n      watchOverflow: this.watchOverflow,\n      onClose: this.onCloseDrawer\n    };\n  };\n\n  Drawer.prototype.render = function () {\n    var _this = this;\n\n    var wrapper = createElement(Fragment, null, this.props.backdrop && createElement(DrawerOverlay, {\n      className: classnames(this.state.isOpen && \"is-open\"),\n      onClick: this.props.backdrop === true ? this.onCloseDrawer : undefined\n    }), createElement(Theme, {\n      values: theme\n    }, function (themeAttributes) {\n      return createElement(DrawerWrapper, {\n        \"data-testid\": \"Drawer-wrapper\",\n        theme: themeAttributes,\n        className: classnames(_this.state.isOpen ? \"is-open\" : \"is-closed\", _this.props.className),\n        role: \"dialog\",\n        \"aria-modal\": \"true\",\n        \"aria-labelledby\": _this.props.labelledById\n      }, createElement(FocusTrap, {\n        active: _this.state.isOpen,\n        onKeyDown: _this.handleKeyDown\n      }, createElement(DrawerContext.Provider, {\n        value: _this.getContextAPI()\n      }, _this.state.isOpen && _this.props.children)));\n    }));\n    return createPortal(wrapper, this.el);\n  };\n\n  Drawer.defaultProps = {\n    backdrop: \"static\"\n  };\n  return Drawer;\n}(Component);\n\nvar DrawerOverlay = styled(\"div\")(templateObject_1$1 || (templateObject_1$1 = __makeTemplateObject([\"\\n  \", \";\\n\"], [\"\\n  \", \";\\n\"])), DrawerOverlayStyles);\nvar DrawerWrapper = styled(\"div\")(templateObject_2$1 || (templateObject_2$1 = __makeTemplateObject([\"\\n  \", \";\\n  \", \";\\n\"], [\"\\n  \", \";\\n  \", \";\\n\"])), function (props) {\n  return DrawerBase(props);\n}, DrawerRight);\nvar templateObject_1$1, templateObject_2$1;\n\nvar DrawerBody = function DrawerBody(_a) {\n  var className = _a.className,\n      children = _a.children;\n  return createElement(DrawerContext.Consumer, null, function (api) {\n    return createElement(Scrollbars, {\n      onScrollFrame: function onScrollFrame(scroll) {\n        return api.watchOverflow(scroll.top);\n      }\n    }, createElement(Root, {\n      className: className\n    }, children));\n  });\n};\n\nvar Root = styled(\"div\")(templateObject_1$2 || (templateObject_1$2 = __makeTemplateObject([\"\\n  padding: 26px 48px;\\n\"], [\"\\n  padding: 26px 48px;\\n\"])));\nvar templateObject_1$2;\n\nvar DrawerHeader = function DrawerHeader(_a) {\n  var className = _a.className,\n      title = _a.title;\n  return createElement(DrawerContext.Consumer, null, function (api) {\n    return createElement(DrawerHeading, {\n      className: classnames(api.overflow && \"is-overflow\", className)\n    }, createElement(DrawerHeadingWrapper, null, createElement(DrawerTitle, {\n      id: api.labelledById\n    }, title), createElement(Button, {\n      \"data-testid\": \"DrawerHeader-closeButton\",\n      isIcon: true,\n      onClick: api.onClose\n    }, createElement(\"i\", {\n      className: \"icon-close\"\n    }))));\n  });\n};\n\nvar DrawerTitle = styled(\"h2\")(templateObject_1$3 || (templateObject_1$3 = __makeTemplateObject([\"\\n  flex: 1 0 auto;\\n  margin-bottom: 0;\\n  font-size: 20px;\\n  line-height: 28px;\\n\"], [\"\\n  flex: 1 0 auto;\\n  margin-bottom: 0;\\n  font-size: 20px;\\n  line-height: 28px;\\n\"])));\nvar DrawerHeadingWrapper = styled(\"div\")(templateObject_2$2 || (templateObject_2$2 = __makeTemplateObject([\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  padding: 26px 48px;\\n\"], [\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  padding: 26px 48px;\\n\"])));\nvar DrawerHeading = styled(\"div\")(templateObject_3$1 || (templateObject_3$1 = __makeTemplateObject([\"\\n  height: 80px;\\n  position: relative;\\n  z-index: 1;\\n\\n  &.is-overflow {\\n    box-shadow: \", \";\\n  }\\n\"], [\"\\n  height: 80px;\\n  position: relative;\\n  z-index: 1;\\n\\n  &.is-overflow {\\n    box-shadow: \", \";\\n  }\\n\"])), variables.layerShadows.layer100Shadow);\nvar templateObject_1$3, templateObject_2$2, templateObject_3$1;\n\nvar DrawerFooter = function DrawerFooter(props) {\n  return createElement(Theme, {\n    values: theme\n  }, function (themeAttributes) {\n    return createElement(Root$1, {\n      theme: themeAttributes\n    }, props.children);\n  });\n};\n\nvar Root$1 = styled(\"div\")(templateObject_1$4 || (templateObject_1$4 = __makeTemplateObject([\"\\n  min-height: 88px;\\n  max-height: 93px;\\n  position: absolute;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  padding: 26px 48px 26px 48px;\\n  text-align: right;\\n  z-index: inherit;\\n  background-color: \", \";\\n  border-top: 1px solid \", \";\\n\"], [\"\\n  min-height: 88px;\\n  max-height: 93px;\\n  position: absolute;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  padding: 26px 48px 26px 48px;\\n  text-align: right;\\n  z-index: inherit;\\n  background-color: \", \";\\n  border-top: 1px solid \", \";\\n\"])), function (props) {\n  return props.theme.backgroundColor;\n}, function (props) {\n  return props.theme.borderColor;\n});\nvar templateObject_1$4;\nexport { Drawer, DrawerBody, DrawerHeader, DrawerFooter };","map":null,"metadata":{},"sourceType":"module"}